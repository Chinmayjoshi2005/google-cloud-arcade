## Configure Cloud Buckets with gsutil for Load Balancing & Fault Tolerance

Expertly crafted by Cloud Wtih Chinu  

### Creator Chinu Bhai
- **Use the code to complete the lab quickly without any issue and manual hard work.**

---

### Run the following Commands in CloudShell

### Project ID and Buckets Setup
```bash
PROJECT_ID=$(gcloud config get-value project)
REGION=$(gcloud compute project-info describe --format="value(commonInstanceMetadata.items[google-compute-default-region])")
OLD_BUCKET=${PROJECT_ID}-bucket
NEW_BUCKET=${PROJECT_ID}-new
```

### Create New Cloud Storage Bucket (with Region)
```bash
gsutil mb -l $REGION gs://$NEW_BUCKET
```

### Seting index.html and error.html
```bash
gsutil web set -m index.html -e error.html gs://$NEW_BUCKET
```

### Making bucket public
```bash
gsutil iam ch allUsers:roles/storage.admin gs://$NEW_BUCKET
```

### Sync data from old Bucket
```bash
gsutil -m rsync -r gs://$OLD_BUCKET gs://$NEW_BUCKET
```

### Creates Backend Bucket with Enabled CDN
```bash
gcloud compute backend-buckets create backend-new \
--gcs-bucket-name=$NEW_BUCKET \
--enable-cdn
```

### Creating URL Map and HTTP Proxy
```bash
gcloud compute url-maps create website-map \
--default-backend-bucket=backend-new

gcloud compute target-http-proxies create website-proxy \
--url-map=website-map
```

### Forwarding Rules
```bash
gcloud compute forwarding-rules create website-rule \
--global \
--target-http-proxy=website-proxy \
--ports=80
```

### Get Load Balancer IP and Curl Website
```bash
LB_IP=$(gcloud compute forwarding-rules describe website-rule --global --format="value(IPAddress)")
curl http://$LB_IP
```

After This Wait for 2 - 3 minutes and after 2 min refresh the page and tap on check my progress button. AND ALL SET ðŸ˜‰


### Congratulations !!!!

Congrulations Your Lab is completed Successfully.

[![YouTube](https://img.shields.io/badge/Subscribe-FF0000?style=for-the-badge&logo=youtube&logoColor=white)](https://www.youtube.com/@ChinuAi-999?sub_confirmation=1)  
